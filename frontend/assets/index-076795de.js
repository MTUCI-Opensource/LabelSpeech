var N=Object.defineProperty;var P=(e,s,o)=>s in e?N(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o;var i=(e,s,o)=>(P(e,typeof s!="symbol"?s+"":s,o),o);import{t as v,y as D,c as d,D as p,E as I,r as g,j as t,F as b,z as S,U as y,n as z,T as f,a as m,s as M,V as _,C as L}from"./index-ddf9c13f.js";const R=v("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);class A{constructor(){i(this,"settingsStates",{transcribation:"admin_block",validation:"admin_block"});i(this,"selectedColorScheme",localStorage.getItem("mantine-color-scheme"));i(this,"toggleSelectedColorScheme",s=>{s?this.selectedColorScheme=s:this.selectedColorScheme=this.selectedColorScheme==="dark"?"light":"dark"});i(this,"setPermissions",s=>{this.settingsStates=s});i(this,"togglePermission",(s,o)=>{const[r,n]=this.settingsStates[o].split("_");(r==="user"||s==="admin")&&(this.settingsStates={...this.settingsStates,[o]:n==="allow"?"user_block":"user_allow"})});D(this)}}const j=new A,E=d(e=>{const s=e.colorScheme==="dark";return{root:{gap:"20px",width:"100%",height:"55%",alignItems:"end",justifyContent:"end"},cancelButton:{width:"140px",fontWeight:400,fontSize:"14px",color:e.colors.gray[5],"&:disabled":{background:"transparent",color:e.colors.gray[5]}},applyButton:{width:"140px",fontWeight:500,fontSize:"14px",backgroundColor:s?e.colors.darkBlue[2]:e.colors.blue[5],"&:disabled":{opacity:.7,backgroundColor:s?e.colors.darkBlue[2]:e.colors.blue[5],color:"white"}}}}),W=p(()=>{const{classes:e}=E(),{colorScheme:s,toggleColorScheme:o}=I(),{tasksPermission:r,updateUserPermissions:n}=y,{setPermissions:a,toggleSelectedColorScheme:h,selectedColorScheme:c,settingsStates:l}=j,x=()=>{n(l),o(c),z.show({title:"Успешно!",color:"green",message:"Настройки применены"})},k=()=>{a(r),h(s)},u=g.useMemo(()=>s!==c,[s,c]),C=g.useMemo(()=>!!Object.entries(r).filter(([T,B])=>B!==l[T]).length,[l,r]);return t.jsxs(b,{className:e.root,children:[t.jsx(S,{variant:"subtle",onClick:k,className:e.cancelButton,disabled:!(C||u),children:"Отмена"}),t.jsx(S,{onClick:x,className:e.applyButton,disabled:!(C||u),children:"Применить"})]})}),$="/assets/DarkTheme-4d6e8fac.svg",F="/assets/LightTheme-7f3b8584.svg",O=d(()=>({root:{fontWeight:500,fontSize:"20px",textAlign:"center"}})),w=({title:e})=>{const{classes:s}=O();return t.jsx(f,{className:s.root,children:e})},U=d((e,{backgroundImage:s,isActive:o})=>{const r=e.colorScheme==="dark";return{root:{alignItems:"center",width:"max-content"},button:{width:"155px",height:"120px",backgroundRepeat:"no-repeat",backgroundImage:`url(${s})`,border:o?"3px solid #339AF0":`1px solid ${r?e.colors.darkBlack[0]:e.colors.gray[4]}`},text:{fontSize:"14px"}}}),H=({text:e,isActive:s,onClick:o,backgroundImage:r})=>{const{classes:n}=U({backgroundImage:r,isActive:s});return t.jsxs(m,{className:n.root,children:[t.jsx(S,{className:n.button,onClick:o}),t.jsx(f,{className:n.text,children:e})]})},V=d(()=>({root:{width:"100%",paddingTop:"18px",justifyContent:"space-between"}})),G=[{theme:"light",image:F,text:"Светлая тема"},{theme:"dark",image:$,text:"Темная тема"}],q=p(()=>{const{selectedColorScheme:e,toggleSelectedColorScheme:s}=j,{classes:o}=V();return t.jsx(b,{className:o.root,children:G.map(({theme:r,text:n,image:a})=>t.jsx(H,{text:n,onClick:()=>s(r),backgroundImage:a,isActive:e===r},r))})}),J=g.memo(({label:e,onChange:s,isAllowed:o,restrictions:r})=>{const n=M(),a=n.colorScheme==="dark",h=a?n.colors.darkBlack[6]:"white",c=r&&t.jsx(R,{size:8,color:n.colors.darkGray[2]});return t.jsx(_,{size:"md",label:e,checked:o,onChange:s,disabled:r,thumbIcon:c,color:a?"darkBlue.2":"blue.5",styles:{track:{border:"0",backgroundColor:a?n.colors.darkBlack[4]:n.colors.gray[2]},thumb:{border:"0",margin:"1px",width:"16px",height:"16px",alignItems:"center",backgroundColor:o?"white":h}}})}),K={transcribation:"Транскрибация",validation:"Верификация"},Q=d(e=>({root:{padding:"25px 50px 30px",borderBottom:`1px solid ${e.colorScheme==="dark"?e.colors.darkBlack[0]:e.colors.gray[4]}`},stack:{gap:"14px"}})),X=p(()=>{const{classes:e}=Q(),{role:s,tasksPermission:o}=y,{settingsStates:r,setPermissions:n,togglePermission:a}=j;g.useEffect(()=>{n(o)},[o,n]);const h=g.useMemo(()=>Object.entries(r).sort((c,l)=>c[0]>l[0]?1:-1).map(([c,l])=>({key:c,label:K[c],isAllowed:l.split("_")[1]==="allow",isRestricted:l.split("_")[0]==="admin"&&s!=="admin",onChange:()=>a(s,c)})),[r,a,s]);return t.jsxs(m,{className:e.root,children:[t.jsx(w,{title:"Выбор задач"}),t.jsx(m,{className:e.stack,children:h.map(({key:c,label:l,onChange:x,isAllowed:k,isRestricted:u})=>t.jsx(J,{label:l,onChange:x,isAllowed:k,restrictions:u},c))})]})}),Y=d(e=>({root:{gap:0,height:"605px",minWidth:"450px",alignSelf:"center",borderRadius:"10px",backgroundColor:e.colorScheme==="dark"?e.colors.darkBlack[6]:"white"},center:{height:"100%"},interfaceSettings:{height:"100%",padding:"25px 50px"},buttons:{gap:"20px",width:"100%",height:"55%",alignSelf:"end",alignItems:"end",justifyContent:"end"}})),Z=()=>{const{classes:e}=Y();return t.jsx(L,{className:e.center,children:t.jsxs(m,{className:e.root,children:[t.jsx(X,{}),t.jsxs(m,{className:e.interfaceSettings,children:[t.jsx(w,{title:"Настройки интерфейса"}),t.jsx(q,{}),t.jsx(b,{className:e.buttons,children:t.jsx(W,{})})]})]})})},te=()=>t.jsx(Z,{});export{te as default};
